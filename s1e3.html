<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Last Echo of Silence - Episode 3</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lora:ital,wght@0,400;0;500;1,400&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Lora', serif;
            background-color: #0c0a09;
        }
        h1, h2, h3, h4 {
            font-family: 'Cinzel', serif;
        }
        .story-container {
            animation: pulse-violet 10s infinite alternate;
        }
        @keyframes pulse-violet {
            0% { box-shadow: 0 0 15px 0 rgba(139, 92, 246, 0.05), 0 0 30px 0 rgba(124, 58, 237, 0.05); }
            50% { box-shadow: 0 0 25px 3px rgba(139, 92, 246, 0.1), 0 0 40px 5px rgba(124, 58, 237, 0.1); }
            100% { box-shadow: 0 0 15px 0 rgba(139, 92, 246, 0.05), 0 0 30px 0 rgba(124, 58, 237, 0.05); }
        }
        p { line-height: 1.8; }
        .lore-term {
            cursor: pointer;
            text-decoration: underline;
            text-decoration-style: dotted;
            text-underline-offset: 3px;
            color: #c4b5fd;
            transition: color 0.2s;
        }
        .lore-term:hover {
            color: #a78bfa;
        }
        .scrolls-extract {
            border-left: 3px solid #ca8a04;
            padding: 1rem;
            margin: 2rem 0;
            background-color: rgba(77, 55, 1, 0.1);
            border-radius: 0 8px 8px 0;
        }
        .scrolls-extract h4 {
            color: #fde047;
            font-weight: bold;
            margin-bottom: 0.75rem;
        }
        .scrolls-extract p {
            font-size: 0.9rem;
            color: #d6d3d1;
            font-style: italic;
        }
        #modal-overlay {
            transition: opacity 0.3s ease-in-out;
        }
        #modal-content {
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }
    </style>
</head>
<body class="bg-stone-950 text-gray-300 selection:bg-violet-500 selection:text-white">

    <div class="min-h-screen flex items-center justify-center p-4 sm:p-6 lg:p-8">
        <div class="story-container max-w-3xl w-full bg-stone-900/50 backdrop-blur-sm rounded-xl p-8 sm:p-12 lg:p-16 border border-violet-900/30 transition-shadow duration-500">
            
            <header class="text-center mb-12">
                <h1 class="text-4xl sm:text-5xl font-bold text-violet-300 tracking-widest leading-tight">The Last Echo of Silence</h1>
                <h2 class="text-xl sm:text-2xl text-gray-400 mt-2 tracking-wider">Episode 3: The Marsh of Memory</h2>
            </header>

            <main class="space-y-6 text-gray-300 text-base sm:text-lg">
                <p>
                    The serpent-<span class="lore-term">Egregore</span> hissed, a soundless vibration of envy and malice. The marketplace crowd, blind to the creature, felt only its broadcasted emotion; arguments flared, a child wailed. The negative energy fed the serpent, its shadowy form growing more solid.
                </p>
                <p>
                    It was a feedback loop of unobserved thought. Kaelen knew he could not fight it here; to do so would only add his own energy to the chaos. He had to be the space, not the storm. He held the creature's violet gaze, not with aggression or fear, but with pure, unwavering observation. He simply saw it, acknowledging its existence without giving it the fuel of his own reaction.
                </p>
                <p>
                    The creature, unable to feed on pure awareness, recoiled as if from a bright light. With a final, frustrated hiss that rippled the air, it dissolved back into the psychic noise. Kaelen let out a breath. He was just a tiny island of calm in a raging sea, and the tide was rising.
                </p>
                <p>
                    He closed his eyes, sifting through the chaotic surface thoughts of the city, listening for the deeper currentâ€”the coherent, structured signal of the <span class="lore-term">Murmuring King</span>. There. Beneath the waves was a river of psychic energy, a trail of sorrow, old and deep and cold. The storm was dredging up a primal wound in the land itself. He turned from the market and followed the current.
                </p>
                <p>
                    The trail led him out through a crumbling gate to the Whispering Marshes, a place local legend called haunted. He knew it as a psychic graveyard, where traumatic memories had sunk into the land itself.
                </p>
                <p>
                    The hot anger of the city was replaced by a profound, echoing melancholy. He felt waves of loss, of promises broken by time. He was a visitor in a library of sorrow. He followed the violet thread of energy deeper, to a clearing of black, mirror-like water. There, an <span class="lore-term">Egregore</span> knelt, ancient and stable. It looked like a king in archaic armor, its shoulders slumped with the weight of a thousand years of despair. This was an anchor, a powerful memory the storm had reawaken.
                </p>
                <p>
                    "I built an empire of stone and gold," the weary voice spoke in Kaelen's mind. "I did it all to escape one simple fear... the fear of being forgotten."
                </p>
                <p>
                    The figure raised a hand, and the water swirled, showing a vision of the <span class="lore-term">Nexus</span>, the great central tower of Meridian. The violet Thought-Storm was pouring from its peak, a psychic volcano. This was the source. Then the vision zoomed in, showing a lone figure at the tower's base, cloaked in a familiar gray robe.
                </p>

                <p class="italic text-gray-400 text-center">
                    It was Elder Lyra, but her eyes, usually so calm, were glowing with a faint, cold, violet light.
                </p>

                <div class="scrolls-extract">
                    <h4>From the Sunstone Scrolls: On Memory</h4>
                    <p>
                        <strong>The Principle of the Echo:</strong> A powerful memory, unobserved, does not fade. It becomes a ghost, haunting the present and repeating its patterns. The ancient king's fear is the same fear now wielded by the new one; the noise of the past becomes the weapon of the present.
                    </p>
                    <p class="mt-4">
                        <strong>The Parable of the Map:</strong> One cannot navigate a storm by watching the waves. One must look deeper for the currents that guide them. Kaelen found his path not in the chaos of the city's surface thoughts, but by following the ancient, underlying current of sorrow that led to the truth.
                    </p>
                </div>
            </main>
        </div>
    </div>

    <!-- Modal for Lore Terms -->
    <div id="modal-overlay" class="fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center p-4 z-50 opacity-0 pointer-events-none">
        <div id="modal-content" class="bg-stone-900 border border-violet-700 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto p-6 relative opacity-0 transform scale-95">
            <button id="close-modal-btn" class="absolute top-3 right-4 text-gray-400 hover:text-white text-3xl">&times;</button>
            <div id="modal-body">
                <!-- Content will be injected here -->
            </div>
        </div>
    </div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- PRE-WRITTEN LORE (WORKS OFFLINE) ---
        const loreData = {
            "Egregore": "A powerful and dangerous thought-form. An Egregore is born when a collective emotion, such as mass fear or anger, becomes so concentrated that it gains a monstrous, semi-sentient existence of its own.",
            "Murmuring King": "The supposed architect of the psychic storm affecting the world. It is a rival power that seeks not to quell the world's mental noise, but to control it, turning collective fear into a weapon and a throne of power in Meridian.",
            "Nexus": "The great central tower of Meridian, and the apparent source of the psychic storm. It acts as a focal point or amplifier for the Murmuring King's power."
        };

        // --- Modal Elements ---
        const modalOverlay = document.getElementById('modal-overlay');
        const modalContent = document.getElementById('modal-content');
        const modalBody = document.getElementById('modal-body');
        const closeModalBtn = document.getElementById('close-modal-btn');

        // --- Event Listeners ---
        document.querySelectorAll('.lore-term').forEach(term => {
            term.addEventListener('click', handleLoreClick);
        });
        closeModalBtn.addEventListener('click', hideModal);
        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) hideModal();
        });

        // --- Modal Functions ---
        function showModal(content) {
            modalBody.innerHTML = '';
            modalBody.appendChild(content);
            modalOverlay.classList.remove('opacity-0', 'pointer-events-none');
            modalContent.classList.remove('opacity-0', 'scale-95');
        }

        function hideModal() {
            modalOverlay.classList.add('opacity-0', 'pointer-events-none');
            modalContent.classList.add('opacity-0', 'scale-95');
        }

        // --- Handlers ---
        function handleLoreClick(event) {
            event.stopPropagation();
            const term = event.target.textContent.trim().replace(/'/g, ''); // Clean the term
            const loreText = loreData[term] || "No information found for this term.";
            const loreContainer = document.createElement('div');
            loreContainer.innerHTML = `
                <h3 class="text-2xl font-bold text-violet-300 mb-4">${term}</h3>
                <p class="text-gray-300">${loreText}</p>
            `;
            showModal(loreContainer);
        }
    });
</script>
</body>
</html>
